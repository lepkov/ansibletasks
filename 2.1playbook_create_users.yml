---
-  hosts: nodes
   vars:
     users:
     - username: "Alice"
       email: "alice@example.com"
       pass: !vault |
         $ANSIBLE_VAULT;1.1;AES256
         33353731363561626366333262366362343738356535346661623237393861363739666436323636
         3032633233383163353734626166623034666230666531360a616466646330373934386235663836
         63313538366332393463636633306334353330653938373835386133346236316363366533386533
         6661333263313066310a306362656630386339356333356164663334313462373132303630616239
         3136
     - username: "Bob"
       email: "bob@example.com"
       pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64373531363739326633633436643739306230323661336664306635643266633134353365663466
          6135613933353133356461363235323438373165626266320a653639376465316137666533373539
          66373563643066633239303464383162636532633733386664386433623164316137336137626134
          6332656564393338640a613965626430643339383838653533666132373665393331646439333366
          6432
     - username: "Carol"
       email: "carol@example.com"
       pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          62353134653263613061376662653231336130663632326538316139633563333761646135613163
          6661336136393230353735316533343162373330333639620a383233633465623461633532363265
          32373337366638396636656637336436666366626562316365366562383431666163663839363861
          6637323734633834620a636438306661626432326432326635386639343238306163613333383335
          3632
   tasks:
   - name: Create user {{ item.username }}
     user:
       name: "{{ item.username }}"
       state: present
       comment: "{{ item.email }}"
       create_home: True
       password: "{{ item.pass | password_hash('sha512') }}"
       update_password: on_create
     with_items:
       - "{{ users }}"
...
